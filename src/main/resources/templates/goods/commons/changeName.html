<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div th:fragment="changeName" ng-controller="changeNameController" class="ng-scope">
    <div id="changeName" class="change-name stark-components">
        <div class="publish-box z-depth-4">
            <div class="row">
                <div class="col s12 title">
                    <h1>修改用户名</h1>
                </div>
                <form id="changeNameForm" method="post" commandName="user" role="form">
                    <div class="input-field col s12">
                        <input type="text" name="username" required="required" class="validate ng-pristine ng-empty ng-invalid ng-invalid-required ng-valid-pattern ng-touched" />
                        <label>修改用户名</label>
                    </div>
                    <div class="input-field col s12">
                        <em id="errorMsg" style="color: red"></em>
                    </div>
                    <div ng-show="checkTelIsShow" class="col s12">
                        <button onclick="changeName();" class="waves-effect waves-light btn publish-btn red lighten-1">
                            <i class="iconfont left"></i>
                            <em>确认</em>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script type="text/javascript">

        function changeName() {
            var data=$("#changeNameForm").serialize();
            //alert(JSON.stringify(data));
            $.post("/changeName",data,function (result) {
                if(result.code==200){
                    alert("更新用户名成功！");
                    window.location.reload();
                }else{
                    $("#errorMsg").text("更新用户名失败，服务器异常！");
                }
            },"json");
        }
    </script>
</div>
</body>
</html>